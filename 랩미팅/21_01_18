2021년 1월 18일 랩미팅
이름 : 김민관 
주제 : 근육 시뮬레이션으로 레퍼런스 소몃ㄴ을 사용하지 않고 걷는 모션 만들기
	기존에 토크 시뮬레이션으로 레퍼런스 모션 없이 걷는 모션을 만들었던 논문의 구현을 참고
내용 : 
	지난 상황
		학습을 해본 논문을 사용하였을 떄 미끄러진다
			근육으로 학습이 잘 안됨
			디버깅을 위해 근육 대신 토크 사용해서 학습을 했을 때도 원하는 결과가 안 나옴
		
		biped 모델 학습 결과
			2000, 2000 gain
			600, 600 gain
				커리큘럼 러닝이 이 이상으로는 진행이 되지 않았다
				
		humanoid 모델이 안 되었던 이유
			마찰력의 오류 설정
			Collision 관련 오류가 발생
			
		full-body 모델 학습
			학습 결과
				초반에 점프하는 듯한 동작이 나오면서 밸런스를 잃고 넘어짐
				
		앞으로 진행할 것
			1. urdf 대신 skel 파일 사용해서 학습해보기
			2. torque limit, reward weight, pd gain 등 바꿔가면서 학습
			3. random reset range 늘려서 biped처럼 다리가 앞으로 가고 한 다리가 뒤로
			가는 에피소스 나오도록 해서 학습
			
		Torque Range
			Link마다 Torque Range가 다르게 설정되어있다.
			전체적으로 보았을 떄는 비슷하다
			
		Full Body의 Torque Range가 비슷한 것은 어디를 참고하였는가?
			거기서 Torque가 만들어져서 발생하게 된다.
			Tall Joint를 만들어서 넣어보는 것도 어떤가?
			발의 Contact는 비슷한 것이 아닌가?
			End Effect를 줄여서 구현해도 비슷하게 나온다
				End Effect에서 Torque가 만들어지지 않을때도, 그냥 매달려있을 때도
				조금 다르게 구현이 되지 않을까?
				이러한 구현을 만들어내는 데에 대한 결과물로 영향을 미치지 않았을까?
				
		각 파트의 질량도 비슷한가?
			같은 Torque여도 질량이 가벼우면 많이 움직일 수도 있지 않을까?
			Full Body - 75 Kg
			Biped Body - ??
				큰 차이는 없는 것으로 보인다.
		
		시작할 때의 상태가 무엇인가?
			팔을 내린 상태이다
				Biped Body - 팔을 내린 상태
				Full Body - 팔을 내린 상태
			
			발이 땅꽈 어떠한 상태인가
				Biped Body - 발이 땅과 붙은 상태 (거의 붙어있기 직전의 상태)
				Full Body - 발이 땅과 떨어진 상태
		
		URDF에서 정보들을 추출할 때의 문제인가?
			그것들은 또 아닌 것으로 보인다.
			Skel 파일로 바꾸어서 해야되는가?
			Skel로 구현해서 확인해볼 필요가 있을 것으로 보인다.
			
		PD Control할 시, 문제점이 발생하는가?
			Humanoid 발 Contact부분을 해결해서 다시 구현할 수 있는가?
				Contact부분을 해결해서 진행해보면 될 것으로 보인다.
					발을 그렇다쳐도 팔을 왜 저렇게 움직이는 것인가?
					혹시 T pose가 아니여서 그런 것인가?
					
		Mesh보다는 Box형식이 조금 더 나을 것으로 보인다.
			Contact이 일단 똑바로 서있을 때 발이, Contact point의 높이가
			뼈들로만 구성되어 있을 때, 다를 수 있을 것으로 보인다.
				Box는 좌우로 지탱이 되는데, 지금 Mesh는 발뒷꿈치 Contact point 몇개만
				지탱을 하고 있기에, 지탱을 잘 못할 것으로 보인다.
					Contact Shape는 Box형식으로 구성이 된다.
					Contact Shape를 Rendering해서 직접 눈으로 보이면 좋겠다.
					
		상체를 살짝 앞으로 기울인다.
			기울기로 해결될 수 있는 문제는 아닌 것으로 보인다.
			한번 이렇게 구현을 해봐도 좋을 것으로 보인다.
			
		왜 두가지 Body의 구현이 다르게 구현이 되는가?
			Biped Body
			Full Body
				Reward 조금 다르다
					Humanoid 
						머리쪽에 Link가 달려있어서
					Biped Body
						머리가 부분이 없어서 이부분 관련해서 보상함수가 다르다
						
		다리는 그렇다쳐도 팔은 동일하게 움직여야하는데 이것또한 제대로 구현이 되지 않았다.
			정 안되면 Biped Body를 Humanoid의 형식으로 바꾸어서 진행하는 것도 나쁘지 않아보인다.
			코드는 완전히 같고 모델만 다른 것인가?
				확인을 해봐야할 것으로 보인다.
				Policy Input Output이 Dimension이 달라서 다른 것 빼고 어떤가?
					서로 다른 코드로 돌리고 있는 것인가?
						Simulation은 같이 하는데 environment를 다르게 하고 있지만
						모델이 다르니 environment는 다른 것이 맞다
						하지만, 최대한 하나로 합쳐서 하는 것이 좋을 것으로 보인다.
						두 환경이 공유할 수 있는 부분은 최대한 동일하게끔 하는것이 좋아보인다.
						Biped Full body와 Humanoid Gain이 비슷한가?
						
						첫 동작이 혹시 T Pose여야 하는 것인가?
						
						Gain이 커서 그런 것인가?
						
						시뮬레이션 처음부터 촬영하여서 
						
						시뮬레이션 Step이 너무 빨랐던 것이 아닌가?
							그래서 동작이 여러개 구혀닝 되어서 되는 것이 아닌가?
							Humanoid에선 1.5이고 Biped Body 2인 것이다.
								둘이 같게 설정하고 돌려봐야할 것으로 보인다.
							캐릭터가 Self Collision에서 캐릭터가 마찰하면서 어떻게 되는 것인가?
							Self Collision은 안 생기게 설정을 해놔서 Humanoid는 Self Collision 진행, Self Collision은 영향이 없을 것 같아서 X로 설정,
								설정을 하여도 인접한 Body의 경우에는 바로 인접한 모델의 경우에는 영향을 주고 있는 것인가? 
								PD Control 
			
		궁금한 점
			질량이 같은가?(교수님 의견)
			Gain은 비슷한가?(PD Gain을 사용할 경우에)
			마찰력은 얼마로 설정하였는가?
				Biped Body - 20, Full Body - 20
				

	
	
	
